token: {{ kubernetes_cluster_token }}

{% if kubernetes_node_label is defined %}
node-label:
{% for label in kubernetes_node_label %}
- "{{ label }}"
{% endfor %}
{% endif %}

{% if kubernetes_node_seed and not kubernetes_node_running %}
cluster-init: true
{% endif %}

{% if not kubernetes_node_seed %}
server: https://{{ kubernetes_cluster_apiserver }}:6443
{% endif %}

{% if kubernetes_node_role == 'server' %}
write-kubeconfig-mode: "0644"
{% endif %}
